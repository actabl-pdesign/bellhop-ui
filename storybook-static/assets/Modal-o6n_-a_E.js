import{u as h,b,l as S,r as p,v as M,m as O,$ as R,n as L}from"./useFocusRing-CRLlfMnZ.js";import{f as z,g as N,h as I,i as A,c as x,j as B,k as T}from"./Dialog-Cu7kn-1q.js";import{r as s,R as c}from"./iframe-DcsACL-T.js";import{$ as U,b as g,c as w}from"./OverlayArrow-DORIqTi_.js";let r=typeof document<"u"&&window.visualViewport;function _(){let t=h(),[e,i]=s.useState(()=>t?{width:0,height:0}:E());return s.useEffect(()=>{let a=()=>{i(n=>{let d=E();return d.width===n.width&&d.height===n.height?n:d})};return r?r.addEventListener("resize",a):window.addEventListener("resize",a),()=>{r?r.removeEventListener("resize",a):window.removeEventListener("resize",a)}},[]),e}function E(){return{width:r&&r?.width||window.innerWidth,height:r&&r?.height||window.innerHeight}}function K(t,e,i){let{overlayProps:a,underlayProps:n}=z({...t,isOpen:e.isOpen,onClose:e.close},i);return N({isDisabled:!e.isOpen}),I(),s.useEffect(()=>{if(e.isOpen&&i.current)return A([i.current])},[e.isOpen,i]),{modalProps:b(a),underlayProps:n}}const V=s.createContext(null),m=s.createContext(null),J=s.forwardRef(function(e,i){if(s.useContext(m))return c.createElement(v,{...e,modalRef:i},e.children);let{isDismissable:n,isKeyboardDismissDisabled:d,isOpen:o,defaultOpen:l,onOpenChange:$,children:f,isEntering:u,isExiting:C,UNSTABLE_portalContainer:y,shouldCloseOnInteractOutside:P,...D}=e;return c.createElement(W,{isDismissable:n,isKeyboardDismissDisabled:d,isOpen:o,defaultOpen:l,onOpenChange:$,isEntering:u,isExiting:C,UNSTABLE_portalContainer:y,shouldCloseOnInteractOutside:P},c.createElement(v,{...D,modalRef:i},f))});function j(t,e){[t,e]=S(t,e,V);let i=s.useContext(x),a=U(t),n=t.isOpen!=null||t.defaultOpen!=null||!i?a:i,d=p(e),o=s.useRef(null),l=g(d,n.isOpen),$=g(o,n.isOpen),f=l||$||t.isExiting||!1,u=h();return!n.isOpen&&!f||u?null:c.createElement(k,{...t,state:n,isExiting:f,overlayRef:d,modalRef:o})}const W=s.forwardRef(j);function k({UNSTABLE_portalContainer:t,...e}){let i=e.modalRef,{state:a}=e,{modalProps:n,underlayProps:d}=K(e,a,i),o=w(e.overlayRef)||e.isEntering||!1,l=O({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:o,isExiting:e.isExiting,state:a}}),$=_(),f={...l.style,"--visual-viewport-height":$.height+"px"};return c.createElement(T,{isExiting:e.isExiting,portalContainer:t},c.createElement("div",{...b(R(e),d),...l,style:f,ref:e.overlayRef,"data-entering":o||void 0,"data-exiting":e.isExiting||void 0},c.createElement(L,{values:[[m,{modalProps:n,modalRef:i,isExiting:e.isExiting,isDismissable:e.isDismissable}],[x,a]]},l.children)))}function v(t){let{modalProps:e,modalRef:i,isExiting:a,isDismissable:n}=s.useContext(m),d=s.useContext(x),o=s.useMemo(()=>M(t.modalRef,i),[t.modalRef,i]),l=p(o),$=w(l),f=O({...t,defaultClassName:"react-aria-Modal",values:{isEntering:$,isExiting:a,state:d}});return c.createElement("div",{...b(R(t),e),...f,ref:l,"data-entering":$||void 0,"data-exiting":a||void 0},n&&c.createElement(B,{onDismiss:d.close}),f.children)}export{W as $,J as a};
