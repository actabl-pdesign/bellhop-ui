import{D as oe,E as le,k as F,F as fe,c as q,f as ce,e as m,G as z,H as de,I as ue,J as b,K as g,L as pe,M as ve,N as L,O as $e,b as Z,P as ge,Q as be,w as ye,R as G}from"./useFocusRing-S0-S86YF.js";import{r as E,c as Pe}from"./iframe-BCkU_Mh_.js";import"./index-DoBMcjas.js";const he=E.createContext({isNative:!0,open:Ee,useHref:e=>e});function ee(){return E.useContext(he)}function Me(e,n){let i=e.getAttribute("target");return(!i||i==="_self")&&e.origin===location.origin&&!e.hasAttribute("download")&&!n.metaKey&&!n.ctrlKey&&!n.altKey&&!n.shiftKey}function _(e,n,i=!0){var o,f;let{metaKey:v,ctrlKey:$,altKey:u,shiftKey:h}=n;oe()&&(!((f=window.event)===null||f===void 0||(o=f.type)===null||o===void 0)&&o.startsWith("key"))&&e.target==="_blank"&&(F()?v=!0:$=!0);let T=le()&&F()&&!fe()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:v,ctrlKey:$,altKey:u,shiftKey:h}):new MouseEvent("click",{metaKey:v,ctrlKey:$,altKey:u,shiftKey:h,bubbles:!0,cancelable:!0});_.isOpening=i,q(e),e.dispatchEvent(T),_.isOpening=!1}_.isOpening=!1;function Te(e,n){if(e instanceof HTMLAnchorElement)n(e);else if(e.hasAttribute("data-href")){let i=document.createElement("a");i.href=e.getAttribute("data-href"),e.hasAttribute("data-target")&&(i.target=e.getAttribute("data-target")),e.hasAttribute("data-rel")&&(i.rel=e.getAttribute("data-rel")),e.hasAttribute("data-download")&&(i.download=e.getAttribute("data-download")),e.hasAttribute("data-ping")&&(i.ping=e.getAttribute("data-ping")),e.hasAttribute("data-referrer-policy")&&(i.referrerPolicy=e.getAttribute("data-referrer-policy")),e.appendChild(i),n(i),e.removeChild(i)}}function Ee(e,n){Te(e,i=>_(i,n))}function Oe(e){let n=ee();var i;const o=n.useHref((i=e.href)!==null&&i!==void 0?i:"");return{"data-href":e.href?o:void 0,"data-target":e.target,"data-rel":e.rel,"data-download":e.download,"data-ping":e.ping,"data-referrer-policy":e.referrerPolicy}}function De(e){let n=ee();var i;const o=n.useHref((i=e?.href)!==null&&i!==void 0?i:"");return{href:e?.href?o:void 0,target:e?.target,rel:e?.rel,download:e?.download,ping:e?.ping,referrerPolicy:e?.referrerPolicy}}const te=Pe.createContext({register:()=>{}});te.displayName="PressResponderContext";function xe(e,n){return n.get?n.get.call(e):n.value}function re(e,n,i){if(!n.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return n.get(e)}function me(e,n){var i=re(e,n,"get");return xe(e,i)}function we(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ke(e,n,i){we(e,n),n.set(e,i)}function Ke(e,n,i){if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}}function V(e,n,i){var o=re(e,n,"set");return Ke(e,o,i),i}function _e(e){let n=E.useContext(te);if(n){let{register:i,...o}=n;e=Z(o,e),i()}return ge(n,e.ref),e}var M=new WeakMap;class O{continuePropagation(){V(this,M,!1)}get shouldStopPropagation(){return me(this,M)}constructor(n,i,o,f){ke(this,M,{writable:!0,value:void 0}),V(this,M,!0);var v;let $=(v=f?.target)!==null&&v!==void 0?v:o.currentTarget;const u=$?.getBoundingClientRect();let h,T=0,S,y=null;o.clientX!=null&&o.clientY!=null&&(S=o.clientX,y=o.clientY),u&&(S!=null&&y!=null?(h=S-u.left,T=y-u.top):(h=u.width/2,T=u.height/2)),this.type=n,this.pointerType=i,this.target=o.currentTarget,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.x=h,this.y=T}}const W=Symbol("linkClicked"),J="react-aria-pressable-style",Q="data-react-aria-pressable";function He(e){let{onPress:n,onPressChange:i,onPressStart:o,onPressEnd:f,onPressUp:v,onClick:$,isDisabled:u,isPressed:h,preventFocusOnPress:T,shouldCancelOnPointerExit:S,allowTextSelectionOnPress:y,ref:D,...ne}=_e(e),[ie,B]=E.useState(!1),k=E.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:C,removeAllGlobalListeners:H}=ce(),A=m((t,s)=>{let d=k.current;if(u||d.didFirePressStart)return!1;let r=!0;if(d.isTriggeringEvent=!0,o){let l=new O("pressstart",s,t);o(l),r=l.shouldStopPropagation}return i&&i(!0),d.isTriggeringEvent=!1,d.didFirePressStart=!0,B(!0),r}),K=m((t,s,d=!0)=>{let r=k.current;if(!r.didFirePressStart)return!1;r.didFirePressStart=!1,r.isTriggeringEvent=!0;let l=!0;if(f){let a=new O("pressend",s,t);f(a),l=a.shouldStopPropagation}if(i&&i(!1),B(!1),n&&d&&!u){let a=new O("press",s,t);n(a),l&&(l=a.shouldStopPropagation)}return r.isTriggeringEvent=!1,l}),I=m((t,s)=>{let d=k.current;if(u)return!1;if(v){d.isTriggeringEvent=!0;let r=new O("pressup",s,t);return v(r),d.isTriggeringEvent=!1,r.shouldStopPropagation}return!0}),x=m(t=>{let s=k.current;if(s.isPressed&&s.target){s.didFirePressStart&&s.pointerType!=null&&K(w(s.target,t),s.pointerType,!1),s.isPressed=!1,s.isOverTarget=!1,s.activePointerId=null,s.pointerType=null,H(),y||z(s.target);for(let d of s.disposables)d();s.disposables=[]}}),N=m(t=>{S&&x(t)}),U=m(t=>{$?.(t)}),X=m((t,s)=>{if($){let d=new MouseEvent("click",t);de(d,s),$(ue(d))}}),se=E.useMemo(()=>{let t=k.current,s={onKeyDown(r){if(R(r.nativeEvent,r.currentTarget)&&b(r.currentTarget,g(r.nativeEvent))){var l;j(g(r.nativeEvent),r.key)&&r.preventDefault();let a=!0;if(!t.isPressed&&!r.repeat){t.target=r.currentTarget,t.isPressed=!0,t.pointerType="keyboard",a=A(r,"keyboard");let c=r.currentTarget,p=P=>{R(P,c)&&!P.repeat&&b(c,g(P))&&t.target&&I(w(t.target,P),"keyboard")};C(L(r.currentTarget),"keyup",ye(p,d),!0)}a&&r.stopPropagation(),r.metaKey&&F()&&((l=t.metaKeyEvents)===null||l===void 0||l.set(r.key,r.nativeEvent))}else r.key==="Meta"&&(t.metaKeyEvents=new Map)},onClick(r){if(!(r&&!b(r.currentTarget,g(r.nativeEvent)))&&r&&r.button===0&&!t.isTriggeringEvent&&!_.isOpening){let l=!0;if(u&&r.preventDefault(),!t.ignoreEmulatedMouseEvents&&!t.isPressed&&(t.pointerType==="virtual"||be(r.nativeEvent))){let a=A(r,"virtual"),c=I(r,"virtual"),p=K(r,"virtual");U(r),l=a&&c&&p}else if(t.isPressed&&t.pointerType!=="keyboard"){let a=t.pointerType||r.nativeEvent.pointerType||"virtual",c=I(w(r.currentTarget,r),a),p=K(w(r.currentTarget,r),a,!0);l=c&&p,t.isOverTarget=!1,U(r),x(r)}t.ignoreEmulatedMouseEvents=!1,l&&r.stopPropagation()}}},d=r=>{var l;if(t.isPressed&&t.target&&R(r,t.target)){var a;j(g(r),r.key)&&r.preventDefault();let p=g(r),P=b(t.target,g(r));K(w(t.target,r),"keyboard",P),P&&X(r,t.target),H(),r.key!=="Enter"&&Y(t.target)&&b(t.target,p)&&!r[W]&&(r[W]=!0,_(t.target,r,!1)),t.isPressed=!1,(a=t.metaKeyEvents)===null||a===void 0||a.delete(r.key)}else if(r.key==="Meta"&&(!((l=t.metaKeyEvents)===null||l===void 0)&&l.size)){var c;let p=t.metaKeyEvents;t.metaKeyEvents=void 0;for(let P of p.values())(c=t.target)===null||c===void 0||c.dispatchEvent(new KeyboardEvent("keyup",P))}};if(typeof PointerEvent<"u"){s.onPointerDown=a=>{if(a.button!==0||!b(a.currentTarget,g(a.nativeEvent)))return;if(pe(a.nativeEvent)){t.pointerType="virtual";return}t.pointerType=a.pointerType;let c=!0;if(!t.isPressed){t.isPressed=!0,t.isOverTarget=!0,t.activePointerId=a.pointerId,t.target=a.currentTarget,y||ve(t.target),c=A(a,t.pointerType);let p=g(a.nativeEvent);"releasePointerCapture"in p&&p.releasePointerCapture(a.pointerId),C(L(a.currentTarget),"pointerup",r,!1),C(L(a.currentTarget),"pointercancel",l,!1)}c&&a.stopPropagation()},s.onMouseDown=a=>{if(b(a.currentTarget,g(a.nativeEvent))&&a.button===0){if(T){let c=$e(a.target);c&&t.disposables.push(c)}a.stopPropagation()}},s.onPointerUp=a=>{!b(a.currentTarget,g(a.nativeEvent))||t.pointerType==="virtual"||a.button===0&&!t.isPressed&&I(a,t.pointerType||a.pointerType)},s.onPointerEnter=a=>{a.pointerId===t.activePointerId&&t.target&&!t.isOverTarget&&t.pointerType!=null&&(t.isOverTarget=!0,A(w(t.target,a),t.pointerType))},s.onPointerLeave=a=>{a.pointerId===t.activePointerId&&t.target&&t.isOverTarget&&t.pointerType!=null&&(t.isOverTarget=!1,K(w(t.target,a),t.pointerType,!1),N(a))};let r=a=>{if(a.pointerId===t.activePointerId&&t.isPressed&&a.button===0&&t.target){if(b(t.target,g(a))&&t.pointerType!=null){let c=!1,p=setTimeout(()=>{t.isPressed&&t.target instanceof HTMLElement&&(c?x(a):(q(t.target),t.target.click()))},80);C(a.currentTarget,"click",()=>c=!0,!0),t.disposables.push(()=>clearTimeout(p))}else x(a);t.isOverTarget=!1}},l=a=>{x(a)};s.onDragStart=a=>{b(a.currentTarget,g(a.nativeEvent))&&x(a)}}return s},[C,u,T,H,y,x,N,K,A,I,U,X]);return E.useEffect(()=>{if(!D)return;const t=L(D.current);if(!t||!t.head||t.getElementById(J))return;const s=t.createElement("style");s.id=J,s.textContent=`
@layer {
  [${Q}] {
    touch-action: pan-x pan-y pinch-zoom;
  }
}
    `.trim(),t.head.prepend(s)},[D]),E.useEffect(()=>{let t=k.current;return()=>{var s;y||z((s=t.target)!==null&&s!==void 0?s:void 0);for(let d of t.disposables)d();t.disposables=[]}},[y]),{isPressed:h||ie,pressProps:Z(ne,se,{[Q]:!0})}}function Y(e){return e.tagName==="A"&&e.hasAttribute("href")}function R(e,n){const{key:i,code:o}=e,f=n,v=f.getAttribute("role");return(i==="Enter"||i===" "||i==="Spacebar"||o==="Space")&&!(f instanceof G(f).HTMLInputElement&&!ae(f,i)||f instanceof G(f).HTMLTextAreaElement||f.isContentEditable)&&!((v==="link"||!v&&Y(f))&&i!=="Enter")}function w(e,n){let i=n.clientX,o=n.clientY;return{currentTarget:e,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,metaKey:n.metaKey,altKey:n.altKey,clientX:i,clientY:o}}function Se(e){return e instanceof HTMLInputElement?!1:e instanceof HTMLButtonElement?e.type!=="submit"&&e.type!=="reset":!Y(e)}function j(e,n){return e instanceof HTMLInputElement?!ae(e,n):Se(e)}const Ce=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function ae(e,n){return e.type==="checkbox"||e.type==="radio"?n===" ":Ce.has(e.type)}export{He as $,ke as _,Oe as a,De as b,ee as c,Me as d,te as e,_ as f};
