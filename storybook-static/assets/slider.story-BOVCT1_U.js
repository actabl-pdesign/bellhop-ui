import{r as f,R as I,j as D}from"./iframe-DcsACL-T.js";import{$ as me,a as we}from"./Label-n31a_-dT.js";import{f as re,e as se,G as De,M as Ve,a1 as Me,b as N,c as Se,S as Re,A as Ke,l as ae,s as pe,m as Q,$ as ge,n as he,p as $e,o as ke,q as Fe}from"./useFocusRing-CRLlfMnZ.js";import{$ as ne}from"./context-DYXxa4-O.js";import{$ as Ee}from"./NumberFormatter-DNR9MAW-.js";import{$ as Le}from"./useControlledState-j_z8d0_a.js";import{a as q,$ as oe}from"./number-nHrFdSb-.js";import{$ as ve}from"./useLabel-BUpPyaXs.js";import{$ as Ie}from"./useFormReset-DxDfI0X9.js";import{$ as je}from"./VisuallyHidden-oMX9giJJ.js";import{c as de,s as Ce}from"./cx-X4VLeaWk.js";import"./Hidden-DKNvk6Fw.js";import"./clsx-B-dksMZM.js";import"./useLabels-B63kbyTy.js";function ye(a){let{onMoveStart:e,onMove:t,onMoveEnd:u}=a,c=f.useRef({didMove:!1,lastPosition:null,id:null}),{addGlobalListener:l,removeGlobalListener:h}=re(),b=se((o,p,g,n)=>{g===0&&n===0||(c.current.didMove||(c.current.didMove=!0,e?.({type:"movestart",pointerType:p,shiftKey:o.shiftKey,metaKey:o.metaKey,ctrlKey:o.ctrlKey,altKey:o.altKey})),t?.({type:"move",pointerType:p,deltaX:g,deltaY:n,shiftKey:o.shiftKey,metaKey:o.metaKey,ctrlKey:o.ctrlKey,altKey:o.altKey}))}),m=se((o,p)=>{De(),c.current.didMove&&u?.({type:"moveend",pointerType:p,shiftKey:o.shiftKey,metaKey:o.metaKey,ctrlKey:o.ctrlKey,altKey:o.altKey})});return{moveProps:f.useMemo(()=>{let o={},p=()=>{Ve(),c.current.didMove=!1};{let n=d=>{if(d.pointerId===c.current.id){var v,i;let w=d.pointerType||"mouse";var T,V;b(d,w,d.pageX-((T=(v=c.current.lastPosition)===null||v===void 0?void 0:v.pageX)!==null&&T!==void 0?T:0),d.pageY-((V=(i=c.current.lastPosition)===null||i===void 0?void 0:i.pageY)!==null&&V!==void 0?V:0)),c.current.lastPosition={pageX:d.pageX,pageY:d.pageY}}},$=d=>{if(d.pointerId===c.current.id){let v=d.pointerType||"mouse";m(d,v),c.current.id=null,h(window,"pointermove",n,!1),h(window,"pointerup",$,!1),h(window,"pointercancel",$,!1)}};o.onPointerDown=d=>{d.button===0&&c.current.id==null&&(p(),d.stopPropagation(),d.preventDefault(),c.current.lastPosition={pageX:d.pageX,pageY:d.pageY},c.current.id=d.pointerId,l(window,"pointermove",n,!1),l(window,"pointerup",$,!1),l(window,"pointercancel",$,!1))}}let g=(n,$,d)=>{p(),b(n,"keyboard",$,d),m(n,"keyboard")};return o.onKeyDown=n=>{switch(n.key){case"Left":case"ArrowLeft":n.preventDefault(),n.stopPropagation(),g(n,-1,0);break;case"Right":case"ArrowRight":n.preventDefault(),n.stopPropagation(),g(n,1,0);break;case"Up":case"ArrowUp":n.preventDefault(),n.stopPropagation(),g(n,0,-1);break;case"Down":case"ArrowDown":n.preventDefault(),n.stopPropagation(),g(n,0,1);break}},o},[c,l,h,b,m])}}function Ne(a={}){let{locale:e}=ne();return f.useMemo(()=>new Ee(e,a),[e,a])}const Ae=0,He=100,ze=1;function Be(a){const{isDisabled:e=!1,minValue:t=Ae,maxValue:u=He,numberFormatter:c,step:l=ze,orientation:h="horizontal"}=a;let b=f.useMemo(()=>{let r=(u-t)/10;return r=q(r,0,r+l,l),Math.max(r,l)},[l,u,t]),m=f.useCallback(r=>r?.map((y,M)=>{let B=M===0?t:r[M-1],U=M===r.length-1?u:r[M+1];return q(y,B,U,l)}),[t,u,l]),x=f.useMemo(()=>m(fe(a.value)),[a.value]),o=f.useMemo(()=>{var r;return m((r=fe(a.defaultValue))!==null&&r!==void 0?r:[t])},[a.defaultValue,t]),p=be(a.value,a.defaultValue,a.onChange),g=be(a.value,a.defaultValue,a.onChangeEnd);const[n,$]=Le(x,o,p),[d,v]=f.useState(new Array(n.length).fill(!1)),i=f.useRef(new Array(n.length).fill(!0)),[T,V]=f.useState(void 0),w=f.useRef(n),P=f.useRef(d);let S=r=>{w.current=r,$(r)},E=r=>{P.current=r,v(r)};function A(r){return(r-t)/(u-t)}function H(r){return r===0?t:n[r-1]}function X(r){return r===n.length-1?u:n[r+1]}function j(r){return i.current[r]}function z(r,y){i.current[r]=y}function R(r,y){if(e||!j(r))return;const M=H(r),B=X(r);y=q(y,M,B,l);let U=ce(w.current,r,y);S(U)}function L(r,y){if(e||!j(r))return;y&&(w.current=n);const M=P.current[r];P.current=ce(P.current,r,y),E(P.current),g&&M&&!P.current.some(Boolean)&&g(w.current)}function K(r){return c.format(r)}function s(r,y){R(r,F(y))}function k(r){return Math.round((r-t)/l)*l+t}function F(r){const y=r*(u-t)+t;return oe(k(y),t,u)}function C(r,y=1){let M=Math.max(y,l);R(r,q(n[r]+M,t,u,l))}function O(r,y=1){let M=Math.max(y,l);R(r,q(n[r]-M,t,u,l))}return{values:n,getThumbValue:r=>n[r],setThumbValue:R,setThumbPercent:s,isThumbDragging:r=>d[r],setThumbDragging:L,focusedThumb:T,setFocusedThumb:V,getThumbPercent:r=>A(n[r]),getValuePercent:A,getThumbValueLabel:r=>K(n[r]),getFormattedValue:K,getThumbMinValue:H,getThumbMaxValue:X,getPercentValue:F,isThumbEditable:j,setThumbEditable:z,incrementThumb:C,decrementThumb:O,step:l,pageSize:b,orientation:h,isDisabled:e}}function ce(a,e,t){return a[e]===t?a:[...a.slice(0,e),t,...a.slice(e+1)]}function fe(a){if(a!=null)return Array.isArray(a)?a:[a]}function be(a,e,t){return u=>{t?.(typeof a=="number"||typeof e=="number"?u[0]:u)}}const le=new WeakMap;function te(a,e){let t=le.get(a);if(!t)throw new Error("Unknown slider state");return`${t.id}-${e}`}function Ue(a,e,t){let{labelProps:u,fieldProps:c}=ve(a),l=a.orientation==="vertical";var h;le.set(e,{id:(h=u.id)!==null&&h!==void 0?h:c.id,"aria-describedby":a["aria-describedby"],"aria-details":a["aria-details"]});let{direction:b}=ne(),{addGlobalListener:m,removeGlobalListener:x}=re();const o=f.useRef(null),p=b==="rtl",g=f.useRef(null),{moveProps:n}=ye({onMoveStart(){g.current=null},onMove({deltaX:i,deltaY:T}){if(!t.current)return;let{height:V,width:w}=t.current.getBoundingClientRect(),P=l?V:w;g.current==null&&o.current!=null&&(g.current=e.getThumbPercent(o.current)*P);let S=l?T:i;if((l||p)&&(S=-S),g.current+=S,o.current!=null&&t.current){const E=oe(g.current/P,0,1);e.setThumbPercent(o.current,E)}},onMoveEnd(){o.current!=null&&(e.setThumbDragging(o.current,!1),o.current=null)}});let $=f.useRef(void 0),d=(i,T,V,w)=>{if(t.current&&!a.isDisabled&&e.values.every((P,S)=>!e.isThumbDragging(S))){let{height:P,width:S,top:E,left:A}=t.current.getBoundingClientRect(),H=l?P:S,R=((l?w:V)-(l?E:A))/H;(b==="rtl"||l)&&(R=1-R);let L=e.getPercentValue(R),K,s=e.values.findIndex(k=>L-k<0);if(s===0)K=s;else if(s===-1)K=e.values.length-1;else{let k=e.values[s-1],F=e.values[s];Math.abs(k-L)<Math.abs(F-L)?K=s-1:K=s}K>=0&&e.isThumbEditable(K)?(i.preventDefault(),o.current=K,e.setFocusedThumb(K),$.current=T,e.setThumbDragging(o.current,!0),e.setThumbValue(K,L),m(window,"mouseup",v,!1),m(window,"touchend",v,!1),m(window,"pointerup",v,!1)):o.current=null}},v=i=>{var T,V;((V=i.pointerId)!==null&&V!==void 0?V:(T=i.changedTouches)===null||T===void 0?void 0:T[0].identifier)===$.current&&(o.current!=null&&(e.setThumbDragging(o.current,!1),o.current=null),x(window,"mouseup",v,!1),x(window,"touchend",v,!1),x(window,"pointerup",v,!1))};return"htmlFor"in u&&u.htmlFor&&(delete u.htmlFor,u.onClick=()=>{var i;(i=document.getElementById(te(e,0)))===null||i===void 0||i.focus(),Me("keyboard")}),{labelProps:u,groupProps:{role:"group",...c},trackProps:N({onMouseDown(i){i.button!==0||i.altKey||i.ctrlKey||i.metaKey||d(i,void 0,i.clientX,i.clientY)},onPointerDown(i){i.pointerType==="mouse"&&(i.button!==0||i.altKey||i.ctrlKey||i.metaKey)||d(i,i.pointerId,i.clientX,i.clientY)},onTouchStart(i){d(i,i.changedTouches[0].identifier,i.changedTouches[0].clientX,i.changedTouches[0].clientY)},style:{position:"relative",touchAction:"none"}},n),outputProps:{htmlFor:e.values.map((i,T)=>te(e,T)).join(" "),"aria-live":"off"}}}function Ge(a,e){let{index:t=0,isRequired:u,validationState:c,isInvalid:l,trackRef:h,inputRef:b,orientation:m=e.orientation,name:x}=a,o=a.isDisabled||e.isDisabled,p=m==="vertical",{direction:g}=ne(),{addGlobalListener:n,removeGlobalListener:$}=re(),d=le.get(e);var v;const{labelProps:i,fieldProps:T}=ve({...a,id:te(e,t),"aria-labelledby":`${d.id} ${(v=a["aria-labelledby"])!==null&&v!==void 0?v:""}`.trim()}),V=e.values[t],w=f.useCallback(()=>{b.current&&Se(b.current)},[b]),P=e.focusedThumb===t;f.useEffect(()=>{P&&w()},[P,w]);let S=g==="rtl",E=f.useRef(null),{keyboardProps:A}=Re({onKeyDown(s){let{getThumbMaxValue:k,getThumbMinValue:F,decrementThumb:C,incrementThumb:O,setThumbValue:r,setThumbDragging:y,pageSize:M}=e;if(!/^(PageUp|PageDown|Home|End)$/.test(s.key)){s.continuePropagation();return}switch(s.preventDefault(),y(t,!0),s.key){case"PageUp":O(t,M);break;case"PageDown":C(t,M);break;case"Home":r(t,F(t));break;case"End":r(t,k(t));break}y(t,!1)}}),{moveProps:H}=ye({onMoveStart(){E.current=null,e.setThumbDragging(t,!0)},onMove({deltaX:s,deltaY:k,pointerType:F,shiftKey:C}){const{getThumbPercent:O,setThumbPercent:r,decrementThumb:y,incrementThumb:M,step:B,pageSize:U}=e;if(!h.current)return;let{width:Pe,height:xe}=h.current.getBoundingClientRect(),ue=p?xe:Pe;if(E.current==null&&(E.current=O(t)*ue),F==="keyboard")s>0&&S||s<0&&!S||k>0?y(t,C?U:B):M(t,C?U:B);else{let ee=p?k:s;(p||S)&&(ee=-ee),E.current+=ee,r(t,oe(E.current/ue,0,1))}},onMoveEnd(){e.setThumbDragging(t,!1)}});e.setThumbEditable(t,!o);const{focusableProps:X}=Ke(N(a,{onFocus:()=>e.setFocusedThumb(t),onBlur:()=>e.setFocusedThumb(void 0)}),b);let j=f.useRef(void 0),z=s=>{w(),j.current=s,e.setThumbDragging(t,!0),n(window,"mouseup",R,!1),n(window,"touchend",R,!1),n(window,"pointerup",R,!1)},R=s=>{var k,F;((F=s.pointerId)!==null&&F!==void 0?F:(k=s.changedTouches)===null||k===void 0?void 0:k[0].identifier)===j.current&&(w(),e.setThumbDragging(t,!1),$(window,"mouseup",R,!1),$(window,"touchend",R,!1),$(window,"pointerup",R,!1))},L=e.getThumbPercent(t);(p||g==="rtl")&&(L=1-L);let K=o?{}:N(A,H,{onMouseDown:s=>{s.button!==0||s.altKey||s.ctrlKey||s.metaKey||z()},onPointerDown:s=>{s.button!==0||s.altKey||s.ctrlKey||s.metaKey||z(s.pointerId)},onTouchStart:s=>{z(s.changedTouches[0].identifier)}});return Ie(b,V,s=>{e.setThumbValue(t,s)}),{inputProps:N(X,T,{type:"range",tabIndex:o?void 0:0,min:e.getThumbMinValue(t),max:e.getThumbMaxValue(t),step:e.step,value:V,name:x,disabled:o,"aria-orientation":m,"aria-valuetext":e.getThumbValueLabel(t),"aria-required":u||void 0,"aria-invalid":l||c==="invalid"||void 0,"aria-errormessage":a["aria-errormessage"],"aria-describedby":[d["aria-describedby"],a["aria-describedby"]].filter(Boolean).join(" "),"aria-details":[d["aria-details"],a["aria-details"]].filter(Boolean).join(" "),onChange:s=>{e.setThumbValue(t,parseFloat(s.target.value))}}),thumbProps:{...K,style:{position:"absolute",[p?"top":"left"]:`${L*100}%`,transform:"translate(-50%, -50%)",touchAction:"none"}},labelProps:i,isDragging:e.isThumbDragging(t),isDisabled:o,isFocused:P}}const Xe=f.createContext(null),Z=f.createContext(null),ie=f.createContext(null),Te=f.createContext(null),Oe=f.forwardRef(function(e,t){[e,t]=ae(e,t,Xe);let u=f.useRef(null),c=Ne(e.formatOptions),l=Be({...e,numberFormatter:c}),[h,b]=pe(!e["aria-label"]&&!e["aria-labelledby"]),{groupProps:m,trackProps:x,labelProps:o,outputProps:p}=Ue({...e,label:b},l,u),g=Q({...e,values:{orientation:l.orientation,isDisabled:l.isDisabled,state:l},defaultClassName:"react-aria-Slider"}),n=ge(e);return delete n.id,I.createElement(he,{values:[[Z,l],[ie,{...x,ref:u}],[Te,p],[me,{...o,ref:h}]]},I.createElement("div",{...n,...m,...g,ref:t,slot:e.slot||void 0,"data-orientation":l.orientation,"data-disabled":l.isDisabled||void 0}))}),qe=f.forwardRef(function(e,t){[e,t]=ae(e,t,Te);let{children:u,style:c,className:l,...h}=e,b=f.useContext(Z),m=Q({className:l,style:c,children:u,defaultChildren:b.getThumbValueLabel(0),defaultClassName:"react-aria-SliderOutput",values:{orientation:b.orientation,isDisabled:b.isDisabled,state:b}});return I.createElement("output",{...h,...m,ref:t,"data-orientation":b.orientation||void 0,"data-disabled":b.isDisabled||void 0})}),Ye=f.forwardRef(function(e,t){[e,t]=ae(e,t,ie);let u=f.useContext(Z),{onHoverStart:c,onHoverEnd:l,onHoverChange:h,...b}=e,{hoverProps:m,isHovered:x}=$e({onHoverStart:c,onHoverEnd:l,onHoverChange:h}),o=Q({...e,defaultClassName:"react-aria-SliderTrack",values:{orientation:u.orientation,isDisabled:u.isDisabled,isHovered:x,state:u}});return I.createElement("div",{...N(b,m),...o,ref:t,"data-hovered":x||void 0,"data-orientation":u.orientation||void 0,"data-disabled":u.isDisabled||void 0})}),_e=f.forwardRef(function(e,t){let{inputRef:u=null}=e,c=f.useContext(Z),{ref:l}=ke(ie),{index:h=0}=e,b=f.useRef(null),m=u||b,[x,o]=pe(!e["aria-label"]&&!e["aria-labelledby"]),{thumbProps:p,inputProps:g,labelProps:n,isDragging:$,isFocused:d,isDisabled:v}=Ge({...e,index:h,trackRef:l,inputRef:m,label:o},c),{focusProps:i,isFocusVisible:T}=Fe(),{hoverProps:V,isHovered:w}=$e(e),P=Q({...e,defaultClassName:"react-aria-SliderThumb",values:{state:c,isHovered:w,isDragging:$,isFocused:d,isFocusVisible:T,isDisabled:v}}),S=ge(e);return delete S.id,I.createElement("div",{...N(S,p,V),...P,ref:t,style:{...p.style,...P.style},"data-hovered":w||void 0,"data-dragging":$||void 0,"data-focused":d||void 0,"data-focus-visible":T||void 0,"data-disabled":v||void 0},I.createElement(je,null,I.createElement("input",{ref:m,...N(g,i)})),I.createElement(he,{values:[[me,{...n,ref:x}]]},P.children))}),We=Ce({default:"hidden",bottom:"absolute top-2 left-1/2 -translate-x-1/2 translate-y-full text-md font-medium text-primary","top-floating":"absolute -top-2 left-1/2 -translate-x-1/2 -translate-y-full rounded-lg bg-primary px-3 py-2 text-xs font-semibold text-secondary shadow-lg ring-1 ring-secondary_alt"}),G=({labelPosition:a="default",minValue:e=0,maxValue:t=100,labelFormatter:u,formatOptions:c,...l})=>{const h={style:"percent",maximumFractionDigits:0};return D.jsxs(Oe,{...l,minValue:e,maxValue:t,formatOptions:c??h,children:[D.jsx(we,{}),D.jsx(Ye,{className:"relative h-2 w-full rounded-full bg-quaternary",children:({state:{values:b,getThumbValue:m,getThumbPercent:x,getFormattedValue:o}})=>{const p=b.length===1?0:x(0),g=b.length===1?x(0):x(1)-p;return D.jsxs(D.Fragment,{children:[D.jsx("span",{className:"absolute z-10 h-2 w-full rounded-full bg-brand-solid",style:{left:`${p*100}%`,width:`${g*100}%`}}),b.map((n,$)=>D.jsx(_e,{index:$,className:({isFocusVisible:d,isDragging:v})=>de("absolute top-1/2 z-20 box-border size-6 cursor-grab rounded-full bg-slider-handle-bg shadow-md ring-2 ring-slider-handle-border ring-inset",d&&"outline-2 outline-offset-2 outline-focus-ring",v&&"cursor-grabbing"),children:D.jsx(qe,{className:de("whitespace-nowrap",We[a]),children:u?u(m($)):o(m($)/100)})},$))]})}})]})};try{G.displayName="Slider",G.__docgenInfo={description:"",displayName:"Slider",props:{labelPosition:{defaultValue:{value:"default"},description:"",name:"labelPosition",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"default"'},{value:'"bottom"'},{value:'"top-floating"'}]}},labelFormatter:{defaultValue:null,description:"",name:"labelFormatter",required:!1,type:{name:"((value: number) => string) | undefined"}}}}}catch{}const Je=()=>D.jsx(G,{defaultValue:[0,25]}),Qe=()=>D.jsx(G,{defaultValue:[0,25],labelPosition:"bottom"}),Ze=()=>D.jsx(G,{defaultValue:[0,25],labelPosition:"top-floating"}),et=()=>D.jsx(G,{defaultValue:50,labelPosition:"top-floating"}),pt={title:"Base components/Sliders",decorators:[a=>D.jsx("div",{className:"bg-primary p-16",children:D.jsx("div",{className:"max-w-xs",children:D.jsx(a,{})})})]},J=()=>D.jsx(Je,{}),Y=()=>D.jsx(Qe,{});Y.storyName="Bottom label";const _=()=>D.jsx(Ze,{});_.storyName="Top floating";const W=()=>D.jsx(et,{});W.storyName="Single thumb";J.parameters={...J.parameters,docs:{...J.parameters?.docs,source:{originalSource:"() => <Sliders.Default />",...J.parameters?.docs?.source}}};Y.parameters={...Y.parameters,docs:{...Y.parameters?.docs,source:{originalSource:"() => <Sliders.BottomLabel />",...Y.parameters?.docs?.source}}};_.parameters={..._.parameters,docs:{..._.parameters?.docs,source:{originalSource:"() => <Sliders.TopFloating />",..._.parameters?.docs?.source}}};W.parameters={...W.parameters,docs:{...W.parameters?.docs,source:{originalSource:"() => <Sliders.SingleThumb />",...W.parameters?.docs?.source}}};export{Y as BottomLabel,J as Default,W as SingleThumb,_ as TopFloating,pt as default};
