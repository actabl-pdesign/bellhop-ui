import{r as n,j as t}from"./iframe-DcsACL-T.js";import{c as _}from"./cx-X4VLeaWk.js";var Oe=Object.defineProperty,Fe=Object.defineProperties,Ge=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertySymbols,Se=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,be=(e,i,a)=>i in e?Oe(e,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[i]=a,He=(e,i)=>{for(var a in i||(i={}))Se.call(i,a)&&be(e,a,i[a]);if(ee)for(var a of ee(i))ye.call(i,a)&&be(e,a,i[a]);return e},$e=(e,i)=>Fe(e,Ge(i)),qe=(e,i)=>{var a={};for(var s in e)Se.call(e,s)&&i.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&ee)for(var s of ee(e))i.indexOf(s)<0&&ye.call(e,s)&&(a[s]=e[s]);return a};function Ze(e){let i=setTimeout(e,0),a=setTimeout(e,10),s=setTimeout(e,50);return[i,a,s]}function Je(e){let i=n.useRef();return n.useEffect(()=>{i.current=e}),i.current}var Ke=18,je=40,Qe=`${je}px`,Ue=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function Xe({containerRef:e,inputRef:i,pushPasswordManagerStrategy:a,isFocused:s}){let[f,u]=n.useState(!1),[C,h]=n.useState(!1),[I,O]=n.useState(!1),F=n.useMemo(()=>a==="none"?!1:(a==="increase-width"||a==="experimental-no-flickering")&&f&&C,[f,C,a]),A=n.useCallback(()=>{let v=e.current,M=i.current;if(!v||!M||I||a==="none")return;let y=v,E=y.getBoundingClientRect().left+y.offsetWidth,B=y.getBoundingClientRect().top+y.offsetHeight/2,d=E-Ke,G=B;document.querySelectorAll(Ue).length===0&&document.elementFromPoint(d,G)===v||(u(!0),O(!0))},[e,i,I,a]);return n.useEffect(()=>{let v=e.current;if(!v||a==="none")return;function M(){let E=window.innerWidth-v.getBoundingClientRect().right;h(E>=je)}M();let y=setInterval(M,1e3);return()=>{clearInterval(y)}},[e,a]),n.useEffect(()=>{let v=s||document.activeElement===i.current;if(a==="none"||!v)return;let M=setTimeout(A,0),y=setTimeout(A,2e3),E=setTimeout(A,5e3),B=setTimeout(()=>{O(!0)},6e3);return()=>{clearTimeout(M),clearTimeout(y),clearTimeout(E),clearTimeout(B)}},[i,s,a,A]),{hasPWMBadge:f,willPushPWMBadge:F,PWM_BADGE_SPACE_WIDTH:Qe}}var we=n.createContext({}),Ce=n.forwardRef((e,i)=>{var a=e,{value:s,onChange:f,maxLength:u,textAlign:C="left",pattern:h,placeholder:I,inputMode:O="numeric",onComplete:F,pushPasswordManagerStrategy:A="increase-width",pasteTransformer:v,containerClassName:M,noScriptCSSFallback:y=Ye,render:E,children:B}=a,d=qe(a,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),G,oe,se,ue,ce;let[Ne,Re]=n.useState(typeof d.defaultValue=="string"?d.defaultValue:""),p=s??Ne,N=Je(p),H=n.useCallback(r=>{f?.(r),Re(r)},[f]),w=n.useMemo(()=>h?typeof h=="string"?new RegExp(h):h:null,[h]),m=n.useRef(null),ne=n.useRef(null),re=n.useRef({value:p,onChange:H,isIOS:typeof window<"u"&&((oe=(G=window?.CSS)==null?void 0:G.supports)==null?void 0:oe.call(G,"-webkit-touch-callout","none"))}),X=n.useRef({prev:[(se=m.current)==null?void 0:se.selectionStart,(ue=m.current)==null?void 0:ue.selectionEnd,(ce=m.current)==null?void 0:ce.selectionDirection]});n.useImperativeHandle(i,()=>m.current,[]),n.useEffect(()=>{let r=m.current,o=ne.current;if(!r||!o)return;re.current.value!==r.value&&re.current.onChange(r.value),X.current.prev=[r.selectionStart,r.selectionEnd,r.selectionDirection];function g(){if(document.activeElement!==r){q(null),Z(null);return}let c=r.selectionStart,x=r.selectionEnd,Y=r.selectionDirection,j=r.maxLength,T=r.value,P=X.current.prev,k=-1,D=-1,L;if(T.length!==0&&c!==null&&x!==null){let Be=c===x,We=c===T.length&&T.length<j;if(Be&&!We){let V=c;if(V===0)k=0,D=1,L="forward";else if(V===j)k=V-1,D=V,L="backward";else if(j>1&&T.length>1){let le=0;if(P[0]!==null&&P[1]!==null){L=V<P[1]?"backward":"forward";let ze=P[0]===P[1]&&P[0]<j;L==="backward"&&!ze&&(le=-1)}k=le+V,D=le+V+1}}k!==-1&&D!==-1&&k!==D&&m.current.setSelectionRange(k,D,L)}let xe=k!==-1?k:c,ve=D!==-1?D:x,Ae=L??Y;q(xe),Z(ve),X.current.prev=[xe,ve,Ae]}if(document.addEventListener("selectionchange",g,{capture:!0}),g(),document.activeElement===r&&ae(!0),!document.getElementById("input-otp-style")){let c=document.createElement("style");if(c.id="input-otp-style",document.head.appendChild(c),c.sheet){let x="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";J(c.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),J(c.sheet,`[data-input-otp]:autofill { ${x} }`),J(c.sheet,`[data-input-otp]:-webkit-autofill { ${x} }`),J(c.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),J(c.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let b=()=>{o&&o.style.setProperty("--root-height",`${r.clientHeight}px`)};b();let S=new ResizeObserver(b);return S.observe(r),()=>{document.removeEventListener("selectionchange",g,{capture:!0}),S.disconnect()}},[]);let[de,pe]=n.useState(!1),[$,ae]=n.useState(!1),[R,q]=n.useState(null),[W,Z]=n.useState(null);n.useEffect(()=>{Ze(()=>{var r,o,g,b;(r=m.current)==null||r.dispatchEvent(new Event("input"));let S=(o=m.current)==null?void 0:o.selectionStart,c=(g=m.current)==null?void 0:g.selectionEnd,x=(b=m.current)==null?void 0:b.selectionDirection;S!==null&&c!==null&&(q(S),Z(c),X.current.prev=[S,c,x])})},[p,$]),n.useEffect(()=>{N!==void 0&&p!==N&&N.length<u&&p.length===u&&F?.(p)},[u,F,N,p]);let z=Xe({containerRef:ne,inputRef:m,pushPasswordManagerStrategy:A,isFocused:$}),me=n.useCallback(r=>{let o=r.currentTarget.value.slice(0,u);if(o.length>0&&w&&!w.test(o)){r.preventDefault();return}typeof N=="string"&&o.length<N.length&&document.dispatchEvent(new Event("selectionchange")),H(o)},[u,H,N,w]),fe=n.useCallback(()=>{var r;if(m.current){let o=Math.min(m.current.value.length,u-1),g=m.current.value.length;(r=m.current)==null||r.setSelectionRange(o,g),q(o),Z(g)}ae(!0)},[u]),he=n.useCallback(r=>{var o,g;let b=m.current;if(!v&&(!re.current.isIOS||!r.clipboardData||!b))return;let S=r.clipboardData.getData("text/plain"),c=v?v(S):S;r.preventDefault();let x=(o=m.current)==null?void 0:o.selectionStart,Y=(g=m.current)==null?void 0:g.selectionEnd,j=(x!==Y?p.slice(0,x)+c+p.slice(Y):p.slice(0,x)+c+p.slice(x)).slice(0,u);if(j.length>0&&w&&!w.test(j))return;b.value=j,H(j);let T=Math.min(j.length,u-1),P=j.length;b.setSelectionRange(T,P),q(T),Z(P)},[u,H,w,p]),Te=n.useMemo(()=>({position:"relative",cursor:d.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[d.disabled]),ge=n.useMemo(()=>({position:"absolute",inset:0,width:z.willPushPWMBadge?`calc(100% + ${z.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:z.willPushPWMBadge?`inset(0 ${z.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:C,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[z.PWM_BADGE_SPACE_WIDTH,z.willPushPWMBadge,C]),Le=n.useMemo(()=>n.createElement("input",$e(He({autoComplete:d.autoComplete||"one-time-code"},d),{"data-input-otp":!0,"data-input-otp-placeholder-shown":p.length===0||void 0,"data-input-otp-mss":R,"data-input-otp-mse":W,inputMode:O,pattern:w?.source,"aria-placeholder":I,style:ge,maxLength:u,value:p,ref:m,onPaste:r=>{var o;he(r),(o=d.onPaste)==null||o.call(d,r)},onChange:me,onMouseOver:r=>{var o;pe(!0),(o=d.onMouseOver)==null||o.call(d,r)},onMouseLeave:r=>{var o;pe(!1),(o=d.onMouseLeave)==null||o.call(d,r)},onFocus:r=>{var o;fe(),(o=d.onFocus)==null||o.call(d,r)},onBlur:r=>{var o;ae(!1),(o=d.onBlur)==null||o.call(d,r)}})),[me,fe,he,O,ge,u,W,R,d,w?.source,p]),ie=n.useMemo(()=>({slots:Array.from({length:u}).map((r,o)=>{var g;let b=$&&R!==null&&W!==null&&(R===W&&o===R||o>=R&&o<W),S=p[o]!==void 0?p[o]:null,c=p[0]!==void 0?null:(g=I?.[o])!=null?g:null;return{char:S,placeholderChar:c,isActive:b,hasFakeCaret:b&&S===null}}),isFocused:$,isHovering:!d.disabled&&de}),[$,de,u,W,R,d.disabled,p]),Ve=n.useMemo(()=>E?E(ie):n.createElement(we.Provider,{value:ie},B),[B,ie,E]);return n.createElement(n.Fragment,null,y!==null&&n.createElement("noscript",null,n.createElement("style",null,y)),n.createElement("div",{ref:ne,"data-input-otp-container":!0,style:Te,className:M},Ve,n.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Le)))});Ce.displayName="Input";function J(e,i){try{e.insertRule(i)}catch{console.error("input-otp could not insert CSS rule:",i)}}var Ye=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const Ee=n.createContext({size:"sm",id:"",digits:4,disabled:!1}),te=()=>{const e=n.useContext(Ee);if(!e)throw new Error("The 'usePinInputContext' hook must be used within a '<PinInput />'");return e},Pe=({className:e,size:i="md",digits:a=4,disabled:s,...f})=>{const u=n.useId();return t.jsx(Ee.Provider,{value:{size:i,digits:a,disabled:s,id:u},children:t.jsx("div",{role:"group",className:_("flex h-max flex-col gap-1.5",e),...f})})};Pe.displayName="Root";const Ie=({inputClassName:e,containerClassName:i,width:a,...s})=>{const{id:f,size:u,digits:C,disabled:h}=te(),I={sm:"h-12",md:"h-16",lg:"h-20"};return t.jsx(Ce,{...s,size:a,maxLength:C,disabled:h,id:"pin-input-"+f,"aria-label":"Enter your pin","aria-labelledby":"pin-input-label-"+f,"aria-describedby":"pin-input-description-"+f,containerClassName:_("flex flex-row gap-3",u==="sm"&&"gap-2",I[u],i),className:_("w-full! disabled:cursor-not-allowed",e)})};Ie.displayName="Group";const et={sm:"size-12 px-2 py-0.5 text-display-md font-medium",md:"size-16 px-2 py-2.5 text-display-lg font-medium",lg:"size-20 px-2 py-3 text-display-xl font-medium"},Me=({index:e,className:i,...a})=>{const{size:s,disabled:f}=te(),{slots:u,isFocused:C}=n.useContext(we),h=u[e];return t.jsx("div",{...a,"aria-label":"Enter digit "+(e+1)+" of "+u.length,className:_("relative flex items-center justify-center rounded-xl bg-primary text-center text-placeholder_subtle ring-1 ring-primary transition-[box-shadow,background-color] duration-100 ease-linear ring-inset",et[s],C&&h?.isActive&&"ring-2 ring-brand outline-2  outline-brand",h?.char&&"text-brand-tertiary_alt ring-2 ring-brand",f&&"bg-disabled_subtle text-fg-disabled_subtle ring-disabled",i),children:h?.char?h.char:h?.hasFakeCaret?t.jsx(tt,{size:s}):0})};Me.displayName="Slot";const tt=({size:e="md"})=>t.jsx("div",{className:_("pointer-events-none h-[1em] w-0.5 animate-caret-blink bg-fg-brand-primary",e==="lg"?"text-display-xl font-medium":"text-display-lg font-medium")}),ke=e=>t.jsx("div",{role:"separator",...e,className:_("text-center text-display-xl font-medium text-placeholder_subtle",e.className),children:"-"});ke.displayName="Separator";const De=({className:e,...i})=>{const{id:a}=te();return t.jsx("label",{...i,htmlFor:"pin-input-"+a,id:"pin-input-label-"+a,className:_("text-sm font-medium text-secondary",e)})};De.displayName="Label";const _e=({className:e,...i})=>{const{id:a}=te();return t.jsx("p",{...i,id:"pin-input-description-"+a,role:"description",className:_("text-sm text-tertiary",e)})};_e.displayName="Description";const l=Pe;l.Slot=Me;l.Label=De;l.Group=Ie;l.Separator=ke;l.Description=_e;try{l.displayName="PinInput",l.__docgenInfo={description:"",displayName:"PinInput",props:{size:{defaultValue:{value:"md"},description:"",name:"size",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"sm"'},{value:'"md"'},{value:'"lg"'}]}},digits:{defaultValue:{value:"4"},description:"",name:"digits",required:!1,type:{name:"number | undefined"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean | undefined"}}}}}catch{}const nt=()=>t.jsxs(l,{digits:6,size:"sm",children:[t.jsx(l.Label,{children:"Secure code"}),t.jsxs(l.Group,{children:[t.jsx(l.Slot,{index:0}),t.jsx(l.Slot,{index:1}),t.jsx(l.Slot,{index:2}),t.jsx(l.Separator,{}),t.jsx(l.Slot,{index:3}),t.jsx(l.Slot,{index:4}),t.jsx(l.Slot,{index:5})]}),t.jsx(l.Description,{children:"This is a hint text to help user."})]}),rt=()=>t.jsxs(l,{digits:6,size:"md",children:[t.jsx(l.Label,{children:"Secure code"}),t.jsxs(l.Group,{children:[t.jsx(l.Slot,{index:0}),t.jsx(l.Slot,{index:1}),t.jsx(l.Slot,{index:2}),t.jsx(l.Separator,{}),t.jsx(l.Slot,{index:3}),t.jsx(l.Slot,{index:4}),t.jsx(l.Slot,{index:5})]}),t.jsx(l.Description,{children:"This is a hint text to help user."})]}),at=()=>t.jsxs(l,{digits:6,size:"lg",children:[t.jsx(l.Label,{children:"Secure code"}),t.jsxs(l.Group,{children:[t.jsx(l.Slot,{index:0}),t.jsx(l.Slot,{index:1}),t.jsx(l.Slot,{index:2}),t.jsx(l.Separator,{}),t.jsx(l.Slot,{index:3}),t.jsx(l.Slot,{index:4}),t.jsx(l.Slot,{index:5})]}),t.jsx(l.Description,{children:"This is a hint text to help user."})]}),ot={title:"Base components/Inputs/Verification code input",decorators:[e=>t.jsx("div",{className:"flex min-h-screen w-full bg-primary p-4",children:t.jsx(e,{})})]},K=()=>t.jsx(nt,{});K.storyName="Verification code input sm";const Q=()=>t.jsx(rt,{});Q.storyName="Verification code input md";const U=()=>t.jsx(at,{});U.storyName="Verification code input lg";K.parameters={...K.parameters,docs:{...K.parameters?.docs,source:{originalSource:"() => <PinInputs.VerificationCodeInputSM />",...K.parameters?.docs?.source}}};Q.parameters={...Q.parameters,docs:{...Q.parameters?.docs,source:{originalSource:"() => <PinInputs.VerificationCodeInputMD />",...Q.parameters?.docs?.source}}};U.parameters={...U.parameters,docs:{...U.parameters?.docs,source:{originalSource:"() => <PinInputs.VerificationCodeInputLG />",...U.parameters?.docs?.source}}};export{U as VerificationCodeInputLg,Q as VerificationCodeInputMd,K as VerificationCodeInputSm,ot as default};
