import{l as A,q as C,p as T,m as _,h as p,b as N,$ as I}from"./useFocusRing-CRLlfMnZ.js";import{r as u,R as P}from"./iframe-DcsACL-T.js";import{$ as w}from"./Hidden-DKNvk6Fw.js";import{$ as R}from"./useButton-To3C-UuU.js";const x=7e3;let n=null;function L(t,e="assertive",d=x){n?n.announce(t,e,d):(n=new V,(typeof IS_REACT_ACT_ENVIRONMENT=="boolean"?IS_REACT_ACT_ENVIRONMENT:typeof jest<"u")?n.announce(t,e,d):setTimeout(()=>{n?.isAttached()&&n?.announce(t,e,d)},100))}function U(t){n&&n.clear(t)}class V{isAttached(){var e;return(e=this.node)===null||e===void 0?void 0:e.isConnected}createLog(e){let d=document.createElement("div");return d.setAttribute("role","log"),d.setAttribute("aria-live",e),d.setAttribute("aria-relevant","additions"),d}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(e,d="assertive",l=x){var i,a;if(!this.node)return;let o=document.createElement("div");typeof e=="object"?(o.setAttribute("role","img"),o.setAttribute("aria-labelledby",e["aria-labelledby"])):o.textContent=e,d==="assertive"?(i=this.assertiveLog)===null||i===void 0||i.appendChild(o):(a=this.politeLog)===null||a===void 0||a.appendChild(o),e!==""&&setTimeout(()=>{o.remove()},l)}clear(e){this.node&&((!e||e==="assertive")&&this.assertiveLog&&(this.assertiveLog.innerHTML=""),(!e||e==="polite")&&this.politeLog&&(this.politeLog.innerHTML=""))}constructor(){this.node=null,this.assertiveLog=null,this.politeLog=null,typeof document<"u"&&(this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,{border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"}),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node))}}const D=u.createContext(null),M=new Set(["form","formAction","formEncType","formMethod","formNoValidate","formTarget","name","value"]),F=u.createContext({}),K=w(function(e,d){[e,d]=A(e,d,F),e=H(e);let l=e,{isPending:i}=l,{buttonProps:a,isPressed:o}=R(e,d),{focusProps:y,isFocused:r,isFocusVisible:$}=C(e),{hoverProps:E,isHovered:h}=T({...e,isDisabled:e.isDisabled||i}),v={isHovered:h,isPressed:(l.isPressed||o)&&!i,isFocused:r,isFocusVisible:$,isDisabled:e.isDisabled||!1,isPending:i??!1},m=_({...e,values:v,defaultClassName:"react-aria-Button"}),c=p(a.id),f=p(),s=a["aria-labelledby"];i&&(s?s=`${s} ${f}`:a["aria-label"]&&(s=`${c} ${f}`));let b=u.useRef(i);return u.useEffect(()=>{let g={"aria-labelledby":s||c};(!b.current&&r&&i||b.current&&r&&!i)&&L(g,"assertive"),b.current=i},[i,r,s,c]),P.createElement("button",{...I(e,{propNames:M}),...N(a,y,E),...m,type:a.type==="submit"&&i?"button":a.type,id:c,ref:d,"aria-labelledby":s,slot:e.slot||void 0,"aria-disabled":i?"true":a["aria-disabled"],"data-disabled":e.isDisabled||void 0,"data-pressed":v.isPressed||void 0,"data-hovered":h||void 0,"data-focused":r||void 0,"data-pending":i||void 0,"data-focus-visible":$||void 0},P.createElement(D.Provider,{value:{id:f}},m.children))});function H(t){return t.isPending&&(t.onPress=void 0,t.onPressStart=void 0,t.onPressEnd=void 0,t.onPressChange=void 0,t.onPressUp=void 0,t.onKeyDown=void 0,t.onKeyUp=void 0,t.onClick=void 0,t.href=void 0),t}export{K as $,L as a,U as b,F as c};
